---
import type { LocalImageProps } from 'astro:assets'
import { getImage } from 'astro:assets'
import { Image } from 'astro:assets'

type Props = LocalImageProps & {
	srcLight?: LocalImageProps['src']
}

const { src, alt, srcLight, class: className, ...rest } = Astro.props

const image = await getImage({ src, alt });
---

{srcLight ? (
    <picture class={className} {...rest}>
        <source srcset={image.src} {...image.attributes} media="(prefers-color-scheme: dark)" />
        <Image class={className} src={srcLight} alt={alt} />
    </picture>
) : (
    <Image class={className} {...Astro.props} />
)}
